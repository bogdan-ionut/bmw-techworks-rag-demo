<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>System Architecture • BMW TechWorks</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500;600&family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet" />
  <style>
    :root {
      /* Reusing variables from index.html for consistency */
      --bg-primary: #f8fafc;
      --bg-card: #ffffff;
      --text-primary: #0f172a;
      --text-secondary: #475569;
      --text-tertiary: #64748b;
      --accent-primary: #2563eb;
      --accent-success: #059669;
      --border-subtle: #e2e8f0;
      --border-medium: #cbd5e1;
      --shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
      --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
      --shadow-glow: 0 0 15px rgba(37, 99, 235, 0.15);
      --font-sans: "Inter", -apple-system, sans-serif;
      --font-mono: "JetBrains Mono", monospace;
    }

    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: var(--font-sans);
      background: var(--bg-primary);
      background-image:
        radial-gradient(circle at 10% 10%, rgba(37, 99, 235, 0.03) 0%, transparent 40%),
        radial-gradient(circle at 90% 90%, rgba(8, 145, 178, 0.03) 0%, transparent 40%);
      color: var(--text-primary);
      height: 100vh;
      width: 100vw;
      overflow: hidden; /* NO SCROLLING */
      display: flex;
      flex-direction: column;
    }

    /* Header (Minimal version of index.html header) */
    header {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      z-index: 100;
      padding: 16px 24px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .brand-logo {
      font-size: 20px;
      font-weight: 800;
      letter-spacing: -0.5px;
      background: linear-gradient(135deg, #1e40af, #0e7490);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      text-decoration: none;
    }

    .back-link {
        color: var(--text-secondary);
        text-decoration: none;
        font-weight: 600;
        font-size: 14px;
        display: flex;
        align-items: center;
        gap: 6px;
        transition: color 0.2s;
        background: white;
        padding: 8px 16px;
        border-radius: 20px;
        border: 1px solid var(--border-subtle);
        box-shadow: var(--shadow-sm);
    }
    .back-link:hover { color: var(--accent-primary); border-color: var(--accent-primary); }

    /* Main Diagram Container */
    .diagram-container {
      flex: 1;
      display: grid;
      place-items: center;
      position: relative;
      width: 100%;
      height: 100%;
    }

    .architecture-diagram {
      width: 90%;
      height: 90%;
      max-width: 1400px;
      position: relative;
    }

    /* SVG Styles */
    svg {
      width: 100%;
      height: 100%;
      overflow: visible;
    }

    .connector {
      fill: none;
      stroke: var(--border-medium);
      stroke-width: 2;
      stroke-dasharray: 8 4; /* Dashed lines for static */
    }

    .connector-active {
        fill: none;
        stroke: var(--accent-primary);
        stroke-width: 2;
        stroke-dasharray: 10;
        animation: flow 1s linear infinite;
        opacity: 0.6;
    }

    @keyframes flow {
        to { stroke-dashoffset: -20; }
    }

    /* Nodes */
    .node {
      background: var(--bg-card);
      border: 1px solid var(--border-subtle);
      border-radius: 12px;
      padding: 16px;
      box-shadow: var(--shadow-lg);
      position: absolute;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      z-index: 10;
      min-width: 140px;
    }

    .node:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-glow);
        border-color: var(--accent-primary);
    }

    .node-icon {
        width: 32px;
        height: 32px;
        margin-bottom: 8px;
        color: var(--accent-primary);
    }

    .node-title {
        font-weight: 700;
        font-size: 14px;
        color: var(--text-primary);
        margin-bottom: 4px;
    }

    .node-subtitle {
        font-size: 11px;
        color: var(--text-secondary);
        font-family: var(--font-mono);
        background: #f1f5f9;
        padding: 2px 6px;
        border-radius: 4px;
        max-width: 100%;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
    }

    .node-details {
        font-size: 10px;
        color: var(--text-tertiary);
        margin-top: 4px;
        line-height: 1.4;
    }

    /* Node Positioning (CSS Grid-like absolute positioning based on percentage) */
    /* Flow: User (Left) -> ALB -> ECS (Center) -> Dependencies (Right/Top/Bottom) */

    /* User */
    #node-user { top: 50%; left: 5%; transform: translate(-50%, -50%); }

    /* ALB */
    #node-alb { top: 50%; left: 20%; transform: translate(-50%, -50%); }

    /* ECS Cluster (Central Hub) */
    #node-ecs { top: 50%; left: 40%; transform: translate(-50%, -50%); width: 180px; height: 180px; border-radius: 50%; z-index: 20; border: 2px solid var(--accent-primary); }
    #node-ecs .node-title { font-size: 16px; }

    /* CI/CD (Top Left) */
    #node-github { top: 15%; left: 20%; transform: translate(-50%, -50%); }
    #node-ecr { top: 15%; left: 40%; transform: translate(-50%, -50%); }

    /* Dependencies (Right Side Fan-out) */

    /* Security/Infra (Top) */
    #node-secrets { top: 15%; left: 65%; transform: translate(-50%, -50%); }
    #node-s3 { top: 15%; left: 80%; transform: translate(-50%, -50%); }

    /* AI Pipeline (The "Living" part - Bottom Right) */
    #node-pinecone { top: 40%; left: 70%; transform: translate(-50%, -50%); min-width: 180px; }
    #node-cohere { top: 60%; left: 70%; transform: translate(-50%, -50%); min-width: 180px; }
    #node-llm { top: 80%; left: 70%; transform: translate(-50%, -50%); min-width: 200px; }

    /* Pulse Animation for active nodes */
    .pulse {
        animation: pulse-ring 2s cubic-bezier(0.215, 0.61, 0.355, 1) infinite;
    }

    @keyframes pulse-ring {
        0% { box-shadow: 0 0 0 0 rgba(37, 99, 235, 0.4); }
        70% { box-shadow: 0 0 0 10px rgba(37, 99, 235, 0); }
        100% { box-shadow: 0 0 0 0 rgba(37, 99, 235, 0); }
    }

    /* Responsive adjustments */
    @media (max-width: 1000px) {
        .node { transform: scale(0.8) translate(-50%, -50%) !important; }
    }

  </style>
</head>
<body>
  <header>
    <a href="/" class="brand-logo">BMW TechWorks <span style="font-weight:400; opacity:0.7;">| System Architecture</span></a>
    <a href="/" class="back-link">
        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
        Back to Search
    </a>
  </header>

  <div class="diagram-container">
    <div class="architecture-diagram">
      <!-- SVG Connectors Layer -->
      <svg>
        <defs>
            <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
              <path d="M0,0 L0,6 L9,3 z" fill="#cbd5e1" />
            </marker>
        </defs>

        <!-- User -> ALB -->
        <path d="M 5% 50% L 20% 50%" class="connector-active" />

        <!-- ALB -> ECS -->
        <path d="M 20% 50% L 40% 50%" class="connector-active" />

        <!-- CI/CD Flow: GitHub -> ECR -> ECS -->
        <path d="M 20% 15% L 40% 15%" class="connector" />
        <path d="M 40% 15% L 40% 40%" class="connector" /> <!-- ECR to ECS -->

        <!-- ECS -> Dependencies -->
        <!-- Secrets -->
        <path d="M 40% 50% Q 50% 15% 65% 15%" class="connector" />

        <!-- S3 -->
        <path d="M 40% 50% Q 55% 30% 80% 15%" class="connector" />

        <!-- AI Pipeline Connectors (Active/Flowing) -->
        <!-- ECS -> Pinecone -->
        <path d="M 40% 50% Q 50% 40% 70% 40%" class="connector-active" />

        <!-- ECS -> Cohere -->
        <path d="M 40% 50% Q 50% 60% 70% 60%" class="connector-active" />

        <!-- ECS -> LLM -->
        <path d="M 40% 50% Q 50% 80% 70% 80%" class="connector-active" />

      </svg>

      <!-- Nodes Layer -->

      <!-- User -->
      <div id="node-user" class="node">
        <svg class="node-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
        <div class="node-title">User</div>
        <div class="node-subtitle">Browser / Client</div>
      </div>

      <!-- ALB -->
      <div id="node-alb" class="node pulse">
        <svg class="node-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="2" width="20" height="8" rx="2" ry="2"></rect><rect x="2" y="14" width="20" height="8" rx="2" ry="2"></rect><line x1="6" y1="6" x2="6" y2="6"></line><line x1="6" y1="18" x2="6" y2="18"></line></svg>
        <div class="node-title">AWS ALB</div>
        <div class="node-subtitle">TLS Termination</div>
      </div>

      <!-- CI/CD Nodes -->
      <div id="node-github" class="node">
        <svg class="node-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path></svg>
        <div class="node-title">GitHub Actions</div>
        <div class="node-subtitle">CI/CD Pipeline</div>
      </div>

      <div id="node-ecr" class="node">
        <svg class="node-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line></svg>
        <div class="node-title">AWS ECR</div>
        <div class="node-subtitle">Container Registry</div>
      </div>

      <!-- ECS -->
      <div id="node-ecs" class="node pulse" style="background: white;">
        <svg class="node-icon" style="width:48px;height:48px;" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 2L2 7l10 5 10-5-10-5z"></path><path d="M2 17l10 5 10-5M2 12l10 5 10-5"></path></svg>
        <div class="node-title">AWS ECS Fargate</div>
        <div class="node-subtitle">FastAPI Application</div>
        <div class="node-details">Orchestrator & Business Logic</div>
      </div>

      <!-- Infrastructure -->
      <div id="node-secrets" class="node">
        <svg class="node-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>
        <div class="node-title">Secrets Manager</div>
        <div class="node-subtitle">API Keys & Config</div>
      </div>

      <div id="node-s3" class="node">
        <svg class="node-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>
        <div class="node-title">AWS S3</div>
        <div class="node-subtitle">Profile Images</div>
      </div>

      <!-- AI Pipeline -->
      <div id="node-pinecone" class="node pulse">
        <svg class="node-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><path d="M12 6v6l4 2"></path></svg>
        <div class="node-title">Pinecone</div>
        <div class="node-subtitle">Vector Database</div>
        <div class="node-details">Model: text-embedding-3-large</div>
      </div>

      <div id="node-cohere" class="node pulse">
        <svg class="node-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 20l9-16-9 7-9-7 9 16z"></path></svg>
        <div class="node-title">Cohere</div>
        <div class="node-subtitle">Reranking Model</div>
        <div class="node-details">Model: rerank-english-v3.0<br>Top N: 8</div>
      </div>

      <div id="node-llm" class="node pulse">
        <svg class="node-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="7" height="7" rx="1"></rect><rect x="14" y="13" width="7" height="7" rx="1"></rect><path d="M10 8h4"></path><path d="M17 10v3"></path><path d="M7 14h3"></path></svg>
        <div class="node-title">LLM Provider</div>
        <div class="node-subtitle">Analysis & Reasoning</div>
        <div class="node-details" style="text-align:left; padding-left:8px;">
            • OpenAI GPT-4o mini<br>
            • OpenAI GPT-5 mini/nano<br>
            • Gemini 3 / 2.5 Flash
        </div>
      </div>

    </div>
  </div>

  <!-- Floating background particles for "Living" feel -->
  <div id="particles"></div>
  <script>
    // Simple particle system
    const particlesContainer = document.getElementById('particles');
    for(let i=0; i<20; i++) {
        const p = document.createElement('div');
        p.style.position = 'absolute';
        p.style.width = Math.random() * 4 + 2 + 'px';
        p.style.height = p.style.width;
        p.style.background = 'rgba(37, 99, 235, ' + (Math.random() * 0.2 + 0.1) + ')';
        p.style.borderRadius = '50%';
        p.style.left = Math.random() * 100 + 'vw';
        p.style.top = Math.random() * 100 + 'vh';
        p.style.pointerEvents = 'none';
        p.style.transition = 'all ' + (Math.random() * 10 + 10) + 's linear';
        particlesContainer.appendChild(p);

        setInterval(() => {
             p.style.left = Math.random() * 100 + 'vw';
             p.style.top = Math.random() * 100 + 'vh';
        }, 100);
    }
  </script>
</body>
</html>